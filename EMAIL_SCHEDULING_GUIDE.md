# מדריך תזמון מיילים לתזכורות

## מה עודכן

1. **תוקן מערכת תזמון המיילים**: הפונקציות Firebase Functions מעודכנות ופועלות
2. **הוסף הגדרות מייל**: המערכת כעת משתמשת בהגדרות המייל שפועלות
3. **תוקן הגדרות נמענים**: המערכת שולחת למייל הראשי ולמיילים הנוספות מההגדרות

## איך זה עובד עכשיו

1. **ליצירת תזכורת עם מייל מתוזמן**:
   - לחץ על "הוסף תזכורת" בלוח התזכורות
   - מלא את פרטי התזכורת (כותרת, תוכן, תאריך)
   - סמן את "📧 שלח תזכורת במייל"
   - בחר שעת שליחה וכמה ימים מראש
   - לחץ "שמור"

2. **מה קורה ברקע**:
   - המערכת שומרת את התזכורת ב-Firestore
   - קוראת לפונקציה `scheduleEmail` ב-Firebase Functions
   - הפונקציה יוצרת מסמך במסד הנתונים עם תזמון השליחה
   - כל דקה רץ תהליך שבודק מיילים מתוזמנים ושולח אותם

3. **למי נשלחים המיילים**:
   - המייל הראשי של המשתמש (מההגדרות)
   - מיילים נוספים מההגדרות (אם מוגדרים)
   - אם אין מיילים מוגדרים, ישלח למייל ברירת המחדל: yafried100@gmail.com

## בדיקה שהמערכת עובדת

1. **הגדר כתובת מייל**:
   - לך להגדרות במערכת
   - הכנס את כתובת המייל הראשית
   - הוסף כתובות מייל נוספות אם רוצה

2. **יצור תזכורת לבדיקה**:
   - צור תזכורת עם תאריך היום או מחר
   - הפעל שליחת מייל
   - קבע שעת שליחה קרובה (כמה דקות מהעת הנוכחית)
   - שמור התזכורת

3. **בדוק בקונסול**:
   - פתח את הקונסול בדפדפן (F12)
   - ראה הודעות debug על תזמון המייל
   - בדוק בגמייל אם המייל הגיע

## פתרון בעיות

### המייל לא נשלח
1. בדוק שיש כתובת מייל בהגדרות
2. ודא שהתאריך והשעה עתידיים
3. בדוק את הקונסול בדפדפן לשגיאות
4. בדוק תיקיית SPAM בגמייל

### שגיאות בקונסול
- בדוק שהמשתמש מחובר (authentication)
- ודא שFunctions פרוסות ב-Firebase
- בדוק שכל ההגדרות במקום

## לוגים ובדיקה

המערכת מדפיסה לוגים מפורטים:
- בקונסול הדפדפן: פרטי תזמון המייל
- ב-Firebase Functions: סטטוס שליחת המיילים
- ב-Firestore: מסמכים של מיילים מתוזמנים 